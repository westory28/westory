<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™ìƒ ëŒ€ì‹œë³´ë“œ - Westory</title>
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <!-- Config (Path corrected for student/ folder) -->
    <script src="../assets/js/firebase-config.js"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
    <script src="../assets/js/auth-manager.js"></script>

    <style>
        .dashboard-container { max-width: 1024px; margin: 0 auto; padding: 24px; }
        
        /* Filter Styles */
        .filter-bar { display: flex; gap: 12px; margin-bottom: 24px; background: white; padding: 16px; border-radius: 12px; border: 1px solid #e5e7eb; align-items: center; }
        .filter-select { padding: 8px 16px; border-radius: 8px; border: 1px solid #d1d5db; font-weight: 600; color: #374151; background-color: #f9fafb; cursor: pointer; transition: all 0.2s; }
        .filter-select:hover { border-color: #2563eb; }
        
        /* Tab Styles */
        .tab-container { display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 2px solid #e5e7eb; }
        .tab-btn { padding: 12px 24px; font-weight: 700; color: #6b7280; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.2s; margin-bottom: -2px; }
        .tab-btn:hover { color: #111827; }
        .tab-btn.active { color: #2563eb; border-bottom-color: #2563eb; }
        .tab-content { display: none; animation: fadeIn 0.3s ease-out; }
        .tab-content.active { display: block; }

        /* Item List Styles */
        .item-card { background: white; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 12px; transition: transform 0.2s, box-shadow 0.2s; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .item-card:hover { transform: translateY(-2px); box-shadow: 0 4px 6px rgba(0,0,0,0.05); border-color: #2563eb; }
        .item-icon { width: 48px; height: 48px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; margin-right: 16px; flex-shrink: 0; }
        
        /* Colors for types */
        .icon-quiz { background-color: #eff6ff; color: #2563eb; }
        .icon-exam { background-color: #fef3c7; color: #d97706; }
        .icon-lesson { background-color: #ecfdf5; color: #059669; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <!-- Header injected by AuthManager -->

    <main class="dashboard-container">
        <!-- Welcome Section -->
        <div class="mb-8">
            <h1 class="text-2xl font-bold text-gray-900" id="welcome-text">í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹</h1>
            <p class="text-gray-500 text-sm mt-1">ì˜¤ëŠ˜ í•™ìŠµí•  ë‚´ìš©ì„ í™•ì¸í•´ë³´ì„¸ìš”.</p>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar">
            <div class="flex items-center gap-2">
                <i class="fas fa-filter text-gray-400"></i>
                <span class="font-bold text-sm text-gray-600">í•™ê¸° ì„ íƒ:</span>
            </div>
            <select id="year-select" class="filter-select">
                <option value="2025">2025í•™ë…„ë„</option>
                <option value="2026">2026í•™ë…„ë„</option>
            </select>
            <select id="semester-select" class="filter-select">
                <option value="2">2í•™ê¸°</option>
                <option value="1">1í•™ê¸°</option>
            </select>
        </div>

        <!-- Tabs -->
        <div class="tab-container">
            <button class="tab-btn active" onclick="switchTab('quiz')">ğŸ§© í˜•ì„±í‰ê°€</button>
            <button class="tab-btn" onclick="switchTab('exam')">ğŸ“ ì‹œí—˜ëŒ€ë¹„</button>
            <button class="tab-btn" onclick="switchTab('lesson')">ğŸ“š ìˆ˜ì—…í™œë™</button>
        </div>

        <!-- Tab Contents -->
        
        <!-- 1. Quiz Tab -->
        <div id="tab-quiz" class="tab-content active">
            <div class="grid gap-3">
                <div class="item-card" onclick="location.href='quiz/list.html'">
                    <div class="flex items-center">
                        <div class="item-icon icon-quiz"><i class="fas fa-puzzle-piece"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800">4ë‹¨ì›: ì œêµ­ì£¼ì˜ ì¹¨ëµ</h3>
                            <p class="text-xs text-gray-500">í˜•ì„±í‰ê°€ | ì´ 10ë¬¸í•­</p>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right text-gray-300"></i>
                </div>
                <div class="item-card" onclick="location.href='quiz/list.html'">
                    <div class="flex items-center">
                        <div class="item-icon icon-quiz"><i class="fas fa-puzzle-piece"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800">5ë‹¨ì›: ì„¸ê³„ ëŒ€ì „</h3>
                            <p class="text-xs text-gray-500">í˜•ì„±í‰ê°€ | ì´ 15ë¬¸í•­</p>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right text-gray-300"></i>
                </div>
            </div>
        </div>

        <!-- 2. Exam Tab -->
        <div id="tab-exam" class="tab-content">
            <div class="grid gap-3">
                <div class="item-card" onclick="location.href='exam/mark.html'">
                    <div class="flex items-center">
                        <div class="item-icon icon-exam"><i class="fas fa-pen-alt"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800">2í•™ê¸° ê¸°ë§ê³ ì‚¬ ìê°€ì±„ì </h3>
                            <p class="text-xs text-gray-500">OMR ë§ˆí‚¹ ë° ì˜¤ë‹µ í™•ì¸</p>
                        </div>
                    </div>
                    <span class="text-xs font-bold text-red-500 bg-red-50 px-2 py-1 rounded">D-Day</span>
                </div>
                <div class="item-card" onclick="location.href='score.html'">
                    <div class="flex items-center">
                        <div class="item-icon icon-exam"><i class="fas fa-chart-line"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800">ë‚˜ì˜ ì„±ì í‘œ í™•ì¸</h3>
                            <p class="text-xs text-gray-500">ìˆ˜í–‰í‰ê°€ ë° ì§€í•„ê³ ì‚¬ í•©ì‚°</p>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right text-gray-300"></i>
                </div>
            </div>
        </div>

        <!-- 3. Lesson Tab -->
        <div id="tab-lesson" class="tab-content">
            <div class="grid gap-3">
                <div class="item-card" onclick="location.href='lesson/note.html'">
                    <div class="flex items-center">
                        <div class="item-icon icon-lesson"><i class="fas fa-book-open"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-800">1910ë…„ëŒ€ ë¬´ë‹¨ í†µì¹˜ì™€ í† ì§€ ì¡°ì‚¬ ì‚¬ì—…</h3>
                            <p class="text-xs text-gray-500">ë¹ˆì¹¸ ì±„ìš°ê¸° í•µì‹¬ ë…¸íŠ¸</p>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right text-gray-300"></i>
                </div>
                <div class="item-card disabled opacity-50 cursor-not-allowed">
                    <div class="flex items-center">
                        <div class="item-icon bg-gray-100 text-gray-400"><i class="fas fa-lock"></i></div>
                        <div>
                            <h3 class="font-bold text-gray-500">3.1 ìš´ë™ê³¼ ëŒ€í•œë¯¼êµ­ ì„ì‹œ ì •ë¶€</h3>
                            <p class="text-xs text-gray-400">ì˜¤í”ˆ ì˜ˆì •</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="text-center py-8 text-gray-400 text-sm border-t mt-auto bg-white">
        Copyright Â© ì—­ì‚¬êµì‚¬ ë°©ì¬ì„. All rights reserved.
    </footer>

    <script>
        // Init Auth
        window.AuthManager.init('student');

        document.addEventListener('auth-ready', (e) => {
            const user = e.detail;
            document.getElementById('welcome-text').innerText = `${user.displayName || 'í•™ìƒ'}ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹`;
        });

        // Tab Switching Logic
        function switchTab(tabName) {
            // Update Buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update Content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }
    </script>
</body>
</html>
