<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ˜ì—… í™œë™ - Westory</title>
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase (Corrected Paths for Depth 2) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="../../assets/js/firebase-config.js"></script>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <script src="../../assets/js/auth-manager.js"></script>

    <style>
        .note-container { max-width: 800px; margin: 0 auto; padding: 24px; }
        
        /* Cloze Input Styles */
        .cloze-input {
            border: none;
            border-bottom: 2px solid #374151;
            text-align: center;
            font-weight: bold;
            color: #2563eb;
            background: transparent;
            padding: 0 4px;
            width: 100px;
            transition: all 0.2s;
        }
        .cloze-input:focus { outline: none; border-bottom-color: #2563eb; background-color: #eff6ff; }
        .cloze-input.correct { border-bottom-color: #22c55e; color: #15803d; background-color: #dcfce7; pointer-events: none; }
        .cloze-input.wrong { border-bottom-color: #ef4444; color: #b91c1c; background-color: #fee2e2; }

        .youtube-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 24px; }
        .youtube-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        
        .note-section { background: white; padding: 32px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid #e5e7eb; line-height: 2.5; font-size: 1.1rem; }
    </style>
</head>
<body>
    <!-- Header injected by AuthManager -->

    <main class="note-container">
        <!-- Title & Objective -->
        <div class="mb-6 border-b pb-4 border-gray-200">
            <span class="text-sm font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded">IV. ì œêµ­ì£¼ì˜ ì¹¨ëµ</span>
            <h1 class="text-2xl font-bold text-gray-900 mt-2">1. 1910ë…„ëŒ€ ë¬´ë‹¨ í†µì¹˜ì™€ í† ì§€ ì¡°ì‚¬ ì‚¬ì—…</h1>
            <p class="text-gray-500 mt-2 text-sm">í•™ìŠµëª©í‘œ: ì¼ì œê°€ ì‹¤ì‹œí•œ ë¬´ë‹¨ í†µì¹˜ì˜ ë‚´ìš©ê³¼ í† ì§€ ì¡°ì‚¬ ì‚¬ì—…ì˜ ê²°ê³¼ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.</p>
        </div>

        <!-- Video Placeholder -->
        <div class="youtube-container bg-gray-100 flex items-center justify-center text-gray-400">
            <!-- <iframe src="https://www.youtube.com/embed/VIDEO_ID" frameborder="0" allowfullscreen></iframe> -->
            <div class="text-center">
                <i class="fab fa-youtube text-4xl mb-2"></i>
                <p>ê´€ë ¨ ì˜ìƒ ìë£Œ ì˜ì—­ (ì¤€ë¹„ì¤‘)</p>
            </div>
        </div>

        <!-- Cloze Test Note -->
        <div class="note-section text-gray-800">
            <h2 class="text-lg font-bold mb-4 border-l-4 border-blue-500 pl-3">í•µì‹¬ ì™ì™ ë…¸íŠ¸</h2>
            
            <p>1. ì¼ì œëŠ” 1910ë…„ í•œêµ­ì„ ê°•ì œ ë³‘í•©í•œ í›„ <input type="text" class="cloze-input" data-answer="ì¡°ì„ ì´ë…ë¶€">ë¥¼ ì„¤ì¹˜í•˜ì—¬ ì‹ë¯¼ í†µì¹˜ì˜ ìµœê³  ê¸°êµ¬ë¡œ ì‚¼ì•˜ë‹¤.</p>
            <p>2. í—Œë³‘ ê²½ì°° ì œë„ë¥¼ ì‹¤ì‹œí•˜ì—¬ í•œêµ­ì¸ì˜ ì¼ìƒìƒí™œì„ ê°ì‹œí•˜ê³ , ì¬íŒ ì—†ì´ ì²˜ë²Œí•  ìˆ˜ ìˆëŠ” <input type="text" class="cloze-input" data-answer="ì¦‰ê²°ì²˜ë¶„ê¶Œ">ì„ ë¶€ì—¬í•˜ì˜€ë‹¤.</p>
            <p>3. ê²½ì œì ìœ¼ë¡œëŠ” ì¬ì •ì„ í™•ë³´í•˜ê³  í† ì§€ ì†Œìœ ê¶Œì„ í™•ì •í•œë‹¤ëŠ” ëª…ë¶„ìœ¼ë¡œ <input type="text" class="cloze-input" data-answer="í† ì§€ì¡°ì‚¬ì‚¬ì—…">ì„ ì‹¤ì‹œí•˜ì˜€ë‹¤. (1910~1918)</p>
            <p>4. ê·¸ ê²°ê³¼, ì‹ ê³ í•˜ì§€ ì•Šì€ í† ì§€ëŠ” ì´ë…ë¶€ì˜ ì†Œìœ ê°€ ë˜ì—ˆìœ¼ë©°, ë§ì€ ë†ë¯¼ë“¤ì´ <input type="text" class="cloze-input" data-answer="ì†Œì‘ë†">ìœ¼ë¡œ ì „ë½í•˜ì˜€ë‹¤.</p>
        </div>

        <!-- Action Buttons -->
        <div class="mt-8 flex justify-end gap-3 sticky bottom-6">
            <button onclick="resetInputs()" class="px-6 py-3 bg-white border border-gray-300 text-gray-700 font-bold rounded-lg shadow-sm hover:bg-gray-50">
                <i class="fas fa-undo mr-2"></i>ì´ˆê¸°í™”
            </button>
            <button onclick="checkAnswers()" class="px-6 py-3 bg-blue-600 text-white font-bold rounded-lg shadow-lg hover:bg-blue-700 transition transform active:scale-95">
                <i class="fas fa-check mr-2"></i>ì •ë‹µ í™•ì¸
            </button>
        </div>
    </main>

    <!-- Footer injected by AuthManager -->

    <script>
        window.AuthManager.init('student');

        function checkAnswers() {
            const inputs = document.querySelectorAll('.cloze-input');
            let correctCount = 0;

            inputs.forEach(input => {
                const userAnswer = input.value.trim().replace(/\s+/g, '');
                const correctAnswer = input.dataset.answer.replace(/\s+/g, '');

                if (userAnswer === correctAnswer) {
                    input.classList.add('correct');
                    input.classList.remove('wrong');
                    correctCount++;
                } else {
                    input.classList.add('wrong');
                    input.classList.remove('correct');
                }
            });

            if (correctCount === inputs.length) {
                alert("ğŸ‰ í›Œë¥­í•©ë‹ˆë‹¤! ëª¨ë“  ë¹ˆì¹¸ì„ ì™„ë²½í•˜ê²Œ ì±„ì› ìŠµë‹ˆë‹¤.");
            }
        }

        function resetInputs() {
            if(!confirm("ì…ë ¥í•œ ë‚´ìš©ì„ ëª¨ë‘ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
            const inputs = document.querySelectorAll('.cloze-input');
            inputs.forEach(input => {
                input.value = '';
                input.classList.remove('correct', 'wrong');
            });
        }
    </script>
</body>
</html>